function xml2json(a,b){var c={toObj:function(b){var d={};if(1==b.nodeType){if(b.attributes.length)for(var e=0;e<b.attributes.length;e++)d[""+b.attributes[e].nodeName]=(b.attributes[e].nodeValue||"").toString();if(b.firstChild){for(var g=0,f=0,h=!1,a=b.firstChild;a;a=a.nextSibling)1==a.nodeType?h=!0:3==a.nodeType&&a.nodeValue.match(/[^ \f\n\r\t\v]/)?g++:4==a.nodeType&&f++;if(h){if(g<2&&f<2){c.removeWhite(b);for(var a=b.firstChild;a;a=a.nextSibling)3==a.nodeType?d["#text"]=c.escape(a.nodeValue):4==a.nodeType?d["#cdata"]=c.escape(a.nodeValue):d[a.nodeName]?d[a.nodeName]instanceof Array?d[a.nodeName][d[a.nodeName].length]=c.toObj(a):d[a.nodeName]=[d[a.nodeName],c.toObj(a)]:d[a.nodeName]=c.toObj(a)}else b.attributes.length?d["#text"]=c.escape(c.innerXml(b)):d=c.escape(c.innerXml(b))}else if(g)b.attributes.length?d["#text"]=c.escape(c.innerXml(b)):d=c.escape(c.innerXml(b));else if(f){if(f>1)d=c.escape(c.innerXml(b));else for(var a=b.firstChild;a;a=a.nextSibling)d["#cdata"]=c.escape(a.nodeValue)}}b.attributes.length||b.firstChild||(d=null)}else 9==b.nodeType?d=c.toObj(b.documentElement):alert("unhandled node type: "+b.nodeType);return d},toJson:function(a,d,b){var e=d?'"'+d+'"':"";if(a instanceof Array){for(var g=0,i=a.length;g<i;g++)a[g]=c.toJson(a[g],"",b+"	");e+=(d?":[":"[")+(a.length>1?"\n"+b+"	"+a.join(",\n"+b+"	")+"\n"+b:a.join(""))+"]"}else if(null==a)e+=(d&&":")+"null";else if("object"==typeof a){var f=[];for(var h in a)f[f.length]=c.toJson(a[h],h,b+"	");e+=(d?":{":"{")+(f.length>1?"\n"+b+"	"+f.join(",\n"+b+"	")+"\n"+b:f.join(""))+"}"}else"string"==typeof a?e+=(d&&":")+'"'+a.toString()+'"':e+=(d&&":")+a.toString();return e},innerXml:function(b){var c="";if("innerHTML"in b)c=b.innerHTML;else for(var d=function(a){var b="";if(1==a.nodeType){b+="<"+a.nodeName;for(var c=0;c<a.attributes.length;c++)b+=" "+a.attributes[c].nodeName+'="'+(a.attributes[c].nodeValue||"").toString()+'"';if(a.firstChild){b+=">";for(var e=a.firstChild;e;e=e.nextSibling)b+=d(e);b+="</"+a.nodeName+">"}else b+="/>"}else 3==a.nodeType?b+=a.nodeValue:4==a.nodeType&&(b+="<![CDATA["+a.nodeValue+"]]>");return b},a=b.firstChild;a;a=a.nextSibling)c+=d(a);return c},escape:function(a){return a.replace(/[\\]/g,"\\\\").replace(/[\"]/g,'\\"').replace(/[\n]/g,"\\n").replace(/[\r]/g,"\\r")},removeWhite:function(b){b.normalize();for(var a=b.firstChild;a;)if(3==a.nodeType){if(a.nodeValue.match(/[^ \f\n\r\t\v]/))a=a.nextSibling;else{var d=a.nextSibling;b.removeChild(a),a=d}}else 1==a.nodeType&&c.removeWhite(a),a=a.nextSibling;return b}};9==a.nodeType&&(a=a.documentElement);var d=c.toJson(c.toObj(c.removeWhite(a)),a.nodeName,"	");return"{\n"+b+(b?d.replace(/\t/g,b):d.replace(/\t|\n/g,""))+"\n}"}